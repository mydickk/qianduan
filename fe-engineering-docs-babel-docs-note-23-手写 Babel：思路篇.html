<!DOCTYPE html> <html lang="en-US"><!--
 Page saved with SingleFile 
 url: https://interview2.poetries.top/fe-engineering-docs/babel-docs/note/23-手写 Babel：思路篇.html 
 saved date: Thu Aug 25 2022 06:37:16 GMT+0800 (China Standard Time)
--><head>
      <style type="text/css">
        @media screen and (min-width:850px){
          .sidebar-button{
            display: none
          }
          .sidebar{
            transform: translateX(0);
          }
        }
        @media screen and (max-width:850px){
          .sidebar-button{
            display: block
          }
        }
      </style>
      <script>
      document.onreadystatechange=function() {
        if(document.readyState == "complete"){ //当页面加载状态为完全结束时进入
          const sidebar = document.querySelector(".sidebar");
          document.querySelector(".sidebar-button").addEventListener("click", (e) => {
            if (!sidebar.style.transform || sidebar.style.transform === "translateX(-100%)") {
              sidebar.style.transform = "translateX(0)";
            } else {
              sidebar.style.transform = "translateX(-100%)";
            }
          });
          var throttle = function (func, delay) {
            var prev = Date.now();
            return function () {
              var context = this; //this指向window
              var args = arguments;
              var now = Date.now();
              if (now - prev >= delay) {
                func.apply(context, args);
                prev = Date.now();
              }
            };
          };
          window.onresize = throttle(function () {
            if (window.innerWidth > 850) {
              if (!sidebar.style.transform || sidebar.style.transform === "translateX(-100%)") {
                sidebar.style.transform = "translateX(0)";
              }
            }
          }, 1000);
        }
      }
      </script><meta charset="utf-8">
    
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端工程相关</title>
    
    
  
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
  <meta name="apple-mobile-web-app-status-bar-style">
  
    
    
    <style>svg[data-v-49140617]{position:absolute;right:7.5px;cursor:pointer}svg.hover[data-v-49140617]{opacity:0}svg[data-v-49140617]:hover{opacity:1!important}span[data-v-49140617]{position:absolute;font-size:.85rem;line-height:.425rem;right:50px;opacity:0;-webkit-transition:opacity .5s;transition:opacity .5s}.code-copy-added:hover>.code-copy svg{opacity:.75}@-webkit-keyframes rotating{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotating{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes v-modal-in{0%{opacity:0}}@-webkit-keyframes v-modal-out{to{opacity:0}}.el-dialog__wrapper{position:fixed;top:0;right:0;bottom:0;left:0;overflow:auto;margin:0}@-webkit-keyframes dialog-fade-in{0%{-webkit-transform:translate3d(0,-20px,0);transform:translate3d(0,-20px,0);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}@keyframes dialog-fade-in{0%{-webkit-transform:translate3d(0,-20px,0);transform:translate3d(0,-20px,0);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}@-webkit-keyframes dialog-fade-out{0%{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}to{-webkit-transform:translate3d(0,-20px,0);transform:translate3d(0,-20px,0);opacity:0}}@keyframes dialog-fade-out{0%{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}to{-webkit-transform:translate3d(0,-20px,0);transform:translate3d(0,-20px,0);opacity:0}}@keyframes v-modal-in{0%{opacity:0}}@keyframes v-modal-out{to{opacity:0}}@-webkit-keyframes msgbox-fade-in{0%{-webkit-transform:translate3d(0,-20px,0);transform:translate3d(0,-20px,0);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}@keyframes msgbox-fade-in{0%{-webkit-transform:translate3d(0,-20px,0);transform:translate3d(0,-20px,0);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}@-webkit-keyframes msgbox-fade-out{0%{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}to{-webkit-transform:translate3d(0,-20px,0);transform:translate3d(0,-20px,0);opacity:0}}@keyframes msgbox-fade-out{0%{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}to{-webkit-transform:translate3d(0,-20px,0);transform:translate3d(0,-20px,0);opacity:0}}@-webkit-keyframes slideInRight-enter{0%{opacity:0;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:translateX(100%);transform:translateX(100%)}to{opacity:1;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes slideInRight-enter{0%{opacity:0;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:translateX(100%);transform:translateX(100%)}to{opacity:1;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:translateX(0);transform:translateX(0)}}@-webkit-keyframes slideInRight-leave{0%{-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:translateX(0);transform:translateX(0);opacity:1}to{-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:translateX(100%);transform:translateX(100%);opacity:0}}@keyframes slideInRight-leave{0%{-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:translateX(0);transform:translateX(0);opacity:1}to{-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:translateX(100%);transform:translateX(100%);opacity:0}}@-webkit-keyframes slideInLeft-enter{0%{opacity:0;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:translateX(-100%);transform:translateX(-100%)}to{opacity:1;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes slideInLeft-enter{0%{opacity:0;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:translateX(-100%);transform:translateX(-100%)}to{opacity:1;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:translateX(0);transform:translateX(0)}}@-webkit-keyframes slideInLeft-leave{0%{-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:translateX(0);transform:translateX(0);opacity:1}to{-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:translateX(-100%);transform:translateX(-100%);opacity:0}}@keyframes slideInLeft-leave{0%{-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:translateX(0);transform:translateX(0);opacity:1}to{-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:translateX(-100%);transform:translateX(-100%);opacity:0}}@-webkit-keyframes loading-rotate{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes loading-rotate{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes loading-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-40px}to{stroke-dasharray:90,150;stroke-dashoffset:-120px}}@keyframes loading-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-40px}to{stroke-dasharray:90,150;stroke-dashoffset:-120px}}@-webkit-keyframes progress{0%{background-position:0 0}to{background-position:32px 0}}@keyframes progress{0%{background-position:0 0}to{background-position:32px 0}}@-webkit-keyframes rotate{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}to{stroke-dasharray:90,150;stroke-dashoffset:-124}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}to{stroke-dasharray:90,150;stroke-dashoffset:-124}}@-webkit-keyframes viewer-fade-in{0%{-webkit-transform:translate3d(0,-20px,0);transform:translate3d(0,-20px,0);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}@keyframes viewer-fade-in{0%{-webkit-transform:translate3d(0,-20px,0);transform:translate3d(0,-20px,0);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}@-webkit-keyframes viewer-fade-out{0%{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}to{-webkit-transform:translate3d(0,-20px,0);transform:translate3d(0,-20px,0);opacity:0}}@keyframes viewer-fade-out{0%{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}to{-webkit-transform:translate3d(0,-20px,0);transform:translate3d(0,-20px,0);opacity:0}}@-webkit-keyframes el-drawer-fade-in{0%{opacity:0}to{opacity:1}}@keyframes el-drawer-fade-in{0%{opacity:0}to{opacity:1}}@-webkit-keyframes rtl-drawer-in{0%{-webkit-transform:translate(100%);transform:translate(100%)}to{-webkit-transform:translate(0);transform:translate(0)}}@keyframes rtl-drawer-in{0%{-webkit-transform:translate(100%);transform:translate(100%)}to{-webkit-transform:translate(0);transform:translate(0)}}@-webkit-keyframes rtl-drawer-out{0%{-webkit-transform:translate(0);transform:translate(0)}to{-webkit-transform:translate(100%);transform:translate(100%)}}@keyframes rtl-drawer-out{0%{-webkit-transform:translate(0);transform:translate(0)}to{-webkit-transform:translate(100%);transform:translate(100%)}}@-webkit-keyframes ltr-drawer-in{0%{-webkit-transform:translate(-100%);transform:translate(-100%)}to{-webkit-transform:translate(0);transform:translate(0)}}@keyframes ltr-drawer-in{0%{-webkit-transform:translate(-100%);transform:translate(-100%)}to{-webkit-transform:translate(0);transform:translate(0)}}@-webkit-keyframes ltr-drawer-out{0%{-webkit-transform:translate(0);transform:translate(0)}to{-webkit-transform:translate(-100%);transform:translate(-100%)}}@keyframes ltr-drawer-out{0%{-webkit-transform:translate(0);transform:translate(0)}to{-webkit-transform:translate(-100%);transform:translate(-100%)}}@-webkit-keyframes ttb-drawer-in{0%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}to{-webkit-transform:translate(0);transform:translate(0)}}@keyframes ttb-drawer-in{0%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}to{-webkit-transform:translate(0);transform:translate(0)}}@-webkit-keyframes ttb-drawer-out{0%{-webkit-transform:translate(0);transform:translate(0)}to{-webkit-transform:translateY(-100%);transform:translateY(-100%)}}@keyframes ttb-drawer-out{0%{-webkit-transform:translate(0);transform:translate(0)}to{-webkit-transform:translateY(-100%);transform:translateY(-100%)}}@-webkit-keyframes btt-drawer-in{0%{-webkit-transform:translateY(100%);transform:translateY(100%)}to{-webkit-transform:translate(0);transform:translate(0)}}@keyframes btt-drawer-in{0%{-webkit-transform:translateY(100%);transform:translateY(100%)}to{-webkit-transform:translate(0);transform:translate(0)}}@-webkit-keyframes btt-drawer-out{0%{-webkit-transform:translate(0);transform:translate(0)}to{-webkit-transform:translateY(100%);transform:translateY(100%)}}@keyframes btt-drawer-out{0%{-webkit-transform:translate(0);transform:translate(0)}to{-webkit-transform:translateY(100%);transform:translateY(100%)}}@-webkit-keyframes nprogress-spinner{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes nprogress-spinner{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.nav-links{display:inline-block}.nav-links a{line-height:1.4rem;color:inherit}.nav-links a.router-link-active,.nav-links a:hover{color:#3eaf7c}.nav-links .nav-item{position:relative;display:inline-block;margin-left:1.5rem;line-height:2rem}.nav-links .nav-item:first-child{margin-left:0}@media (max-width:850px){.nav-links .nav-item{margin-left:0}}@media (min-width:850px){.nav-links a.router-link-active,.nav-links a:hover{color:#2c3e50}}.navbar{padding:.7rem 1.5rem;line-height:2.2rem}.navbar a{display:inline-block}.navbar .links{padding-left:1.5rem;box-sizing:border-box;background-color:#fff;white-space:nowrap;font-size:.9rem;position:absolute;right:1.5rem;top:.7rem;display:-webkit-box;display:flex}@media (max-width:850px){.navbar{padding-left:4rem}.navbar .can-hide{display:none}.navbar .links{padding-left:1.5rem}}.page-nav{max-width:740px;margin:0 auto;padding:2rem 2.5rem}@media (max-width:959px){.page-nav{padding:2rem}}@media (max-width:419px){.page-nav{padding:1.5rem}}.page-nav{padding-top:1rem;padding-bottom:0}.page-nav .inner{min-height:2rem;margin-top:0;border-top:1px solid #eaecef;padding-top:1rem;overflow:auto}.page-nav .next{float:right}.page{padding-bottom:2rem;overflow-x:hidden;display:block}@media only screen and (min-device-width:768px) and (max-device-width:1024px){.page{padding-bottom:20rem!important}}@media screen and (min-width:1200px){.theme-default-content:not(.custom){max-width:1300px!important}}.theme-default-content .content__default{position:relative}.theme-default-content .content__default pre{position:relative!important;padding-top:40px!important}.theme-default-content .content__default pre:after{content:"";position:absolute;top:9px;left:12px;z-index:1;width:10px;height:10px;border-radius:50%;background:#fc625d;box-shadow:20px 0#fdbc40,40px 0#35cd4b}@media screen and (min-width:700px){.theme-default-content .content__default h2{display:-webkit-inline-box;display:inline-flex;-webkit-box-align:center;align-items:center;font-weight:700;background:#ef7060;color:#fff;padding:3px 10px 4px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px;font-size:20px}.theme-default-content .content__default h2:after{content:"";display:inline-block;vertical-align:bottom;border-bottom:36px solid #efebe9;border-right:20px solid transparent;position:relative;left:32px;top:1px}.theme-default-content .content__default h2:before{content:"";border-bottom:2px solid #ef7060;width:100%;display:block;height:10px;position:absolute;margin-top:32px}}.theme-default-content .content__default code{color:#c7254e;background-color:#f9f2f4;font-size:14px;border-radius:5px;padding-left:5px;padding-right:5px;margin:auto 3px}@-webkit-keyframes upDown{0%{-webkit-transform:translateY(5px);transform:translateY(5px)}25%{-webkit-transform:translateY(0);transform:translateY(0)}50%{-webkit-transform:translateY(5px);transform:translateY(5px)}75%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(5px);transform:translateY(5px)}}@keyframes upDown{0%{-webkit-transform:translateY(5px);transform:translateY(5px)}25%{-webkit-transform:translateY(0);transform:translateY(0)}50%{-webkit-transform:translateY(5px);transform:translateY(5px)}75%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(5px);transform:translateY(5px)}}.sidebar-group:not(.collapsable) .sidebar-heading:not(.clickable){cursor:auto;color:inherit}.sidebar-heading{-webkit-transition:color .15s ease;transition:color .15s ease;cursor:pointer;font-size:1.1em;font-weight:700;padding:.35rem 1.5rem .35rem 1.25rem;width:100%;box-sizing:border-box;margin:0;border-left:.25rem solid transparent}.sidebar-heading.open,.sidebar-heading:hover{color:inherit}.sidebar-group-items{-webkit-transition:height .1s ease-out;transition:height .1s ease-out;font-size:.95em;overflow:hidden}.sidebar .sidebar-sub-headers{padding-left:1rem;font-size:.95em}a.sidebar-link{font-size:1em;font-weight:400;color:#2c3e50;border-left:.25rem solid transparent;padding:.35rem 1rem .35rem 1.25rem;line-height:1.4;width:100%;box-sizing:border-box}a.sidebar-link:hover{color:#3eaf7c}a.sidebar-link.active{font-weight:600;color:#3eaf7c;border-left-color:#3eaf7c}.sidebar-group a.sidebar-link{padding-left:2rem}.sidebar-sub-headers a.sidebar-link{padding-top:.25rem;padding-bottom:.25rem;border-left:none}.sidebar ul{padding:0;margin:0;list-style-type:none}.sidebar a{display:inline-block}.sidebar>.sidebar-links{padding:1.5rem 0}.sidebar>.sidebar-links>li:not(:first-child){margin-top:.75rem}@media (max-width:850px){.sidebar>.sidebar-links{padding:1rem 0}}@-webkit-keyframes move{0%{-webkit-transform:translate(-175px) scale(1);transform:translate(-175px) scale(1)}50%{-webkit-transform:translate(-87px) scaleY(.5);transform:translate(-87px) scaleY(.5)}to{-webkit-transform:translate(0) scale(1);transform:translate(0) scale(1)}}@keyframes move{0%{-webkit-transform:translate(-175px) scale(1);transform:translate(-175px) scale(1)}50%{-webkit-transform:translate(-87px) scaleY(.5);transform:translate(-87px) scaleY(.5)}to{-webkit-transform:translate(0) scale(1);transform:translate(0) scale(1)}}.posr{position:relative}pre[class*=language-]{color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}.theme-default-content code{padding:.25rem .5rem}.theme-default-content pre[class*=language-]{line-height:1.4;padding:1.25rem 1.5rem;margin:.85rem 0;background-color:#282c34;border-radius:6px;overflow:auto}.theme-default-content pre[class*=language-] code{color:#fff;padding:0;background-color:transparent;border-radius:0}div[class*=language-]{position:relative;background-color:#282c34;border-radius:6px}div[class*=language-] pre[class*=language-]{background:transparent;position:relative;z-index:1}div[class*=language-]:before{position:absolute;z-index:3;top:.8em;right:1em;font-size:.75rem;color:hsla(0,0%,100%,.4)}.theme-default-content:not(.custom){max-width:740px;margin:0 auto;padding:2rem 2.5rem}@media (max-width:959px){.theme-default-content:not(.custom){padding:2rem}}@media (max-width:419px){.theme-default-content:not(.custom){padding:1.5rem}}body,html{padding:0;margin:0;background-color:#fff}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:16px;color:#2c3e50}.page{padding-left:20rem}.navbar{z-index:20;right:0;height:3.6rem;background-color:#fff;box-sizing:border-box;border-bottom:1px solid #eaecef}.navbar{position:fixed;top:0;left:0}.sidebar{font-size:16px;background-color:#fff;width:20rem;position:fixed;z-index:10;margin:0;top:3.6rem;left:0;bottom:0;box-sizing:border-box;border-right:1px solid #eaecef;overflow-y:auto}.theme-default-content:not(.custom)>:first-child{margin-top:3.6rem}.theme-default-content:not(.custom) a:hover{text-decoration:underline}.theme-default-content:not(.custom) img{max-width:100%}a{font-weight:500;text-decoration:none}a{color:#3eaf7c}ul{padding-left:1.2em}h2,h3{font-weight:600;line-height:1.25}h1:hover .header-anchor,h2:hover .header-anchor,h3:hover .header-anchor,h4:hover .header-anchor,h5:hover .header-anchor,h6:hover .header-anchor{opacity:1}h2{font-size:1.65rem;padding-bottom:.3rem;border-bottom:1px solid #eaecef}h3{font-size:1.35rem}a.header-anchor{font-size:.85em;float:left;margin-left:-.87em;padding-right:.23em;margin-top:.125em;opacity:0}a.header-anchor:hover{text-decoration:none}code{font-family:source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace}p,ul{line-height:1.7}@media (max-width:959px){.sidebar{font-size:15px;width:16.4rem}.page{padding-left:16.4rem}}@media (max-width:850px){.sidebar{top:0;padding-top:3.6rem;transform:translateX(-100%);transition:transform .2s ease}.page{padding-left:0}}@media (max-width:419px){.theme-default-content div[class*=language-]{margin:.85rem -1.5rem;border-radius:0}}</style>
  <style type="text/css">.medium-zoom-image{cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}</style><meta name="description" content="前端工程相关"><link rel="icon" href="data:image/png;base64,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"><style>.sf-hidden{display:none!important}</style><link rel="canonical" href="https://interview2.poetries.top/fe-engineering-docs/babel-docs/note/23-手写 Babel：思路篇.html"><meta http-equiv="content-security-policy" content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:;"><style>img[src="data:,"],source[src="data:,"]{display:none!important}</style></head>
  <body class>
    <div id="app"><div class="theme-container posr"><div><header class="navbar"> 
          <div class="sidebar-button" style="
          width: 1rem;
      "><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div>  <div class="links" style="max-width:1155px"> <nav class="nav-links can-hide"><div class="nav-item"><div><a href="./fe-engineering-docs-docs-npm-script.html" class="nav-link">Npm工作流
  </a></div></div><div class="nav-item"><div><a href="./fe-engineering-docs-fe-engineering-note-01-%E5%BC%80%E7%AF%87%E8%AF%8D%20%E4%BB%80%E4%B9%88%E6%98%AF%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B.html" class="nav-link">前端工程化
  </a></div></div><div class="nav-item"><div><a href="./fe-engineering-docs-docs-webpack.html" class="nav-link">Webpack
  </a></div></div><div class="nav-item"><div><a href="./fe-engineering-docs-docs-docker.html" class="nav-link">Docker
  </a></div></div><div class="nav-item"><div><a href="./fe-engineering-docs-babel-docs-note-01-Babel%E7%9A%84%E4%BB%8B%E7%BB%8D.html" class="nav-link">Babel
  </a></div></div><div class="nav-item"><div><a href="./fe-engineering-docs-vite-docs-note-01-%E6%A8%A1%E5%9D%97%E6%A0%87%E5%87%86%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%20ESM%20%E6%98%AF%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84%E6%9C%AA%E6%9D%A5.html" class="nav-link">Vite
  </a></div></div><div class="nav-item"><div><a href="./fe-engineering-docs-ci-docs-note-01-%E4%BB%80%E4%B9%88%E6%98%AF%20CI%20CD.html" class="nav-link">CI/CD 流程
  </a></div></div> <!----></nav> </div></header></div> <div class="sidebar-mask sf-hidden"></div> <aside class="sidebar"><nav class="nav-links sf-hidden"> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Babel</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="./fe-engineering-docs-babel-docs-note-01-Babel%E7%9A%84%E4%BB%8B%E7%BB%8D.html" class="sidebar-link">Babel的介绍</a></li><li><a href="./fe-engineering-docs-babel-docs-note-02-Babel%20%E7%9A%84%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B.html" class="sidebar-link">Babel 的编译流程</a></li><li><a href="./fe-engineering-docs-babel-docs-note-03-Babel%20%E7%9A%84%20AST.html" class="sidebar-link">Babel 的 AST</a></li><li><a href="./fe-engineering-docs-babel-docs-note-04-Babel%20%E7%9A%84%20API.html" class="sidebar-link">Babel 的 API</a></li><li><a href="./fe-engineering-docs-babel-docs-note-05-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%8F%92%E5%85%A5%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E5%8F%82%E6%95%B0.html" class="sidebar-link">实战案例：插入函数调用参数</a></li><li><a href="./fe-engineering-docs-babel-docs-note-06-JS%20Parser%20%E7%9A%84%E5%8E%86%E5%8F%B2.html" class="sidebar-link">JS Parser 的历史</a></li><li><a href="./fe-engineering-docs-babel-docs-note-07-Traverse%20%E7%9A%84%20path%E3%80%81scope%E3%80%81visitor.html" class="sidebar-link">Traverse 的 path、scope、visitor</a></li><li><a href="./fe-engineering-docs-babel-docs-note-08-Generator%20%E5%92%8C%20SourceMap%20%E7%9A%84%E5%A5%A5%E7%A7%98.html" class="sidebar-link">Generator 和 SourceMap 的奥秘</a></li><li><a href="./fe-engineering-docs-babel-docs-note-09-Code-Frame%20%E5%92%8C%E4%BB%A3%E7%A0%81%E9%AB%98%E4%BA%AE%E5%8E%9F%E7%90%86.html" class="sidebar-link">Code</a></li><li><a href="./fe-engineering-docs-babel-docs-note-10-Babel%20%E6%8F%92%E4%BB%B6%E5%92%8C%20preset.html" class="sidebar-link">Babel 插件和 preset</a></li><li><a href="./fe-engineering-docs-babel-docs-note-11-Babel%20%E6%8F%92%E4%BB%B6%E7%9A%84%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95.html" class="sidebar-link">Babel 插件的单元测试</a></li><li><a href="./fe-engineering-docs-babel-docs-note-12-Babel%20%E7%9A%84%E5%86%85%E7%BD%AE%E5%8A%9F%E8%83%BD.html" class="sidebar-link">Babel 的内置功能</a></li><li><a href="./fe-engineering-docs-babel-docs-note-13-VSCode%20Debugger%20%E7%9A%84%E4%BD%BF%E7%94%A8.html" class="sidebar-link">VSCode Debugger 的使用</a></li><li><a href="./fe-engineering-docs-babel-docs-note-14-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B%EF%BC%9A%E8%87%AA%E5%8A%A8%E5%9F%8B%E7%82%B9.html" class="sidebar-link">实战案例：自动埋点</a></li><li><a href="./fe-engineering-docs-babel-docs-note-15-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B:%20%E8%87%AA%E5%8A%A8%E5%9B%BD%E9%99%85%E5%8C%96.html" class="sidebar-link">实战案例: 自动国际化</a></li><li><a href="./fe-engineering-docs-babel-docs-note-16-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B:%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%20API%20%E6%96%87%E6%A1%A3.html" class="sidebar-link">实战案例:自动生成 API 文档</a></li><li><a href="./fe-engineering-docs-babel-docs-note-17-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B:%20Linter.html" class="sidebar-link">实战案例: Linter</a></li><li><a href="./fe-engineering-docs-babel-docs-note-18-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B:%20%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5.html" class="sidebar-link">实战案例: 类型检查</a></li><li><a href="./fe-engineering-docs-babel-docs-note-19-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B:%20%E5%8E%8B%E7%BC%A9%E6%B7%B7%E6%B7%86.html" class="sidebar-link">实战案例: 压缩混淆</a></li><li><a href="./fe-engineering-docs-babel-docs-note-20-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B:%20JS%20%E8%A7%A3%E9%87%8A%E5%99%A8.html" class="sidebar-link">实战案例: JS 解释器</a></li><li><a href="./fe-engineering-docs-babel-docs-note-21-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B:%20%E6%A8%A1%E5%9D%97%E9%81%8D%E5%8E%86%E5%99%A8.html" class="sidebar-link">实战案例: 模块遍历器</a></li><li><a href="./fe-engineering-docs-babel-docs-note-22-Babel%20Macros.html" class="sidebar-link">Babel Macros</a></li><li><a href="./fe-engineering-docs-babel-docs-note-23-%E6%89%8B%E5%86%99%20Babel%EF%BC%9A%E6%80%9D%E8%B7%AF%E7%AF%87.html" class="active sidebar-link">手写 Babel：思路篇</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="./fe-engineering-docs-babel-docs-note-23-%E6%89%8B%E5%86%99%20Babel%EF%BC%9A%E6%80%9D%E8%B7%AF%E7%AF%87.html#%E6%95%B4%E4%BD%93%E6%80%9D%E8%B7%AF" class="sidebar-link">整体思路</a></li></ul></li><li><a href="./fe-engineering-docs-babel-docs-note-24-%E6%89%8B%E5%86%99%20Babel%EF%BC%9A%20parser%20%E7%AF%87.html" class="sidebar-link">手写 Babel： parser 篇</a></li><li><a href="./fe-engineering-docs-babel-docs-note-25-%E6%89%8B%E5%86%99%20Babel%EF%BC%9A%20traverse%20%E7%AF%87.html" class="sidebar-link">手写 Babel： traverse 篇</a></li><li><a href="./fe-engineering-docs-babel-docs-note-26-%E6%89%8B%E5%86%99%20Babel%EF%BC%9A%20traverse%20path%E7%AF%87.html" class="sidebar-link">手写 Babel： traverse path篇</a></li><li><a href="./fe-engineering-docs-babel-docs-note-27-%E6%89%8B%E5%86%99%20Babel%EF%BC%9A%20traverse%20%20scope%E7%AF%87.html" class="sidebar-link">手写 Babel： traverse  scope篇</a></li><li><a href="./fe-engineering-docs-babel-docs-note-28-%E6%89%8B%E5%86%99%20Babel%EF%BC%9A%20generator%E7%AF%87.html" class="sidebar-link">手写 Babel： generator篇</a></li><li><a href="./fe-engineering-docs-babel-docs-note-29-%E6%89%8B%E5%86%99%20Babel%EF%BC%9A%20core%E7%AF%87.html" class="sidebar-link">手写 Babel： core篇</a></li><li><a href="./fe-engineering-docs-babel-docs-note-30-%E6%89%8B%E5%86%99%20Babel%20cli%E7%AF%87.html" class="sidebar-link">手写 Babel cli篇</a></li><li><a href="./fe-engineering-docs-babel-docs-note-31-%E6%89%8B%E5%86%99%20Babel%20%E6%80%BB%E7%BB%93.html" class="sidebar-link">手写 Babel 总结</a></li></ul></section></li></ul> </aside> <main class="page"> <div id="container" class="theme-default-content"><div class="content__default"><p>学到这里，我们对 babel 插件的写法和 babel 内置的 preset 的实现都有了比较多的了解，但是对 babel 本身的实现可能还不是特别清晰。所以，我们通过写一个简单的 babel 来深入探索下 babel 的实现原理。</p> <p>希望完成这个案例之后，能够帮你真正掌握 babel。</p> <h2 id="整体思路"><a href="./fe-engineering-docs-babel-docs-note-23-%E6%89%8B%E5%86%99%20Babel%EF%BC%9A%E6%80%9D%E8%B7%AF%E7%AF%87.html#%E6%95%B4%E4%BD%93%E6%80%9D%E8%B7%AF" class="header-anchor">#</a> 整体思路</h2> <h3 id="babel-的编译流程"><a href="./fe-engineering-docs-babel-docs-note-23-%E6%89%8B%E5%86%99%20Babel%EF%BC%9A%E6%80%9D%E8%B7%AF%E7%AF%87.html#babel-%E7%9A%84%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B" class="header-anchor">#</a> babel 的编译流程</h3> <p>我们知道，babel 的主要编译流程是 parse、transform、generate。</p> <ul><li>parse 是把源码转成 AST</li> <li>transform 是对 AST 做增删改</li> <li>generate 是打印 AST 成目标代码并生成 sourcemap</li></ul> <p><img src="data:image/webp;base64,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" alt="img" class="medium-zoom-image"></p> <h3 id="babel7-内置的包"><a href="./fe-engineering-docs-babel-docs-note-23-%E6%89%8B%E5%86%99%20Babel%EF%BC%9A%E6%80%9D%E8%B7%AF%E7%AF%87.html#babel7-%E5%86%85%E7%BD%AE%E7%9A%84%E5%8C%85" class="header-anchor">#</a> babel7 内置的包</h3> <p>babel 7 把这些功能的实现放到了不同的包里面：</p> <ul><li><code>@babel/parser</code> 解析源码成 AST，对应 parse 阶段</li> <li><code>@babel/traverse</code> 遍历 AST 并调用 visitor 函数，对应 transform 阶段</li> <li><code>@babel/generate</code> 打印 AST，生成目标代码和 sorucemap，对应 generate 阶段</li></ul> <p>其中，遍历过程中需要创建 AST，会用到：</p> <ul><li><code>@babel/types</code> 创建、判断 AST</li> <li><code>@babel/template</code> 根据模块批量创建 AST</li></ul> <p>上面是每一个阶段的功能， babel 整体功能的入口是在：</p> <ul><li><code>@babel/core</code> 解析配置、应用 plugin、preset，整体整体编译流程</li></ul> <p>插件和插件之间有一些公共函数，这些都是在：</p> <ul><li><code>@babel/helpers</code> 用于转换 es next 代码需要的通过模板创建的 AST，比如 _typeof、_defineProperties 等</li> <li><code>@babel/helper-xxx</code> 其他的插件之间共享的用于操作 AST 的公共函数</li></ul> <p>当然，除了编译期转换的时候会有公共函数以外，运行时也有，这部分是放在：</p> <ul><li><div class="language- extra-class"><pre class="language-text code-copy-added"><code>@babel/runtime
</code><div data-v-49140617 class="code-copy"><svg data-v-49140617 xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="hover" style="bottom:7.5px"><path data-v-49140617 fill="none" d="M0 0h24v24H0z"></path> <path data-v-49140617 fill="#3eaf7c" d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4l6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"></path></svg> <span data-v-49140617 class style="bottom:7.5px">
        @程序员poetry: 代码已经复制到剪贴板
    </span></div></pre></div><p>主要是包含 corejs、helpers、regenerator 这 3 部分：</p> <ul><li>helper： helper 函数的运行时版本（不是通过 AST 注入了，而是运行时引入代码）</li> <li>corejs： es next 的 api 的实现，corejs 2 只支持静态方法，corejs 3 还支持实例方法</li> <li>regenerator：async await 的实现，由 facebook 维护</li></ul></li></ul> <p>（babel 做语法转换是自己实现的 helper，但是做 polyfill 都不是自己实现的，而是借助了第三方的 corejs、regenerator）</p> <ul><li><code>@babel/cli</code> babel 的命令行工具，支持通过 glob 字符串来编译多个文件</li></ul> <h3 id="我们要实现哪些包"><a href="./fe-engineering-docs-babel-docs-note-23-%E6%89%8B%E5%86%99%20Babel%EF%BC%9A%E6%80%9D%E8%B7%AF%E7%AF%87.html#%E6%88%91%E4%BB%AC%E8%A6%81%E5%AE%9E%E7%8E%B0%E5%93%AA%E4%BA%9B%E5%8C%85" class="header-anchor">#</a> 我们要实现哪些包</h3> <p>上面介绍的是 babel 完成功能所内置的一些包，我们如果要写一个简易的 babel，也得实现这些包，但可以做一些简化。</p> <ul><li><code>parser 包</code>是肯定要实现的，babel parser 是基于 acorn fork 的，我们也基于 acorn，做一点扩展。完成从源码到 AST 的转换。</li> <li><code>traverse 包</code>是对 AST 的遍历，需要知道不同类型的 AST 都遍历哪些 key，这些是在 @babel/types 包里面定义的，我们也用类似的实现方式，并且会调用对应的 visitor，实现 path 和 path.scope 的一些 api 然后传入。</li> <li><code>generate 包</code>是打印 AST 成目标代码，生成 sourcemap。打印这部分每个 AST 类型都要写一个对应的函数来处理，生成 sourcemap 使用 source-map 这个包，关联 parse 时记录的 loc 和打印时计算的位置来生成每一个 mapping。</li> <li><code>types 包</code>用于创建 AST，会维护创建和判断各种 AST 的 api，并且提供每种 AST 需要遍历的属性是哪些，用于 traverse 的过程</li> <li><code>template 包</code>是批量创建 AST 的，这里我们实现一个简单的版本，传入字符串，parse 成 AST 返回。</li> <li><code>core 包</code>是整体流程的串联，支持 plugins 和 presets，调用插件，合并成最终的 visitors，然后再 traverse。</li> <li><code>helper 包</code>我们也会实现一个，因为支持了 plugin，那么中有一些公共的函数可以复用</li> <li><code>runtime 包</code>我们也提供一下，不过只加入一些用于做语法转换的辅助函数就好了</li> <li><code>cli 包</code> 实现一个命令行工具，来调用 core 包的功能</li></ul> <p>这是我们大概会做的事情，把这些都实现一遍就算一个比较完整的 babel 了。实现的过程中更能加深我们对 babel、对转译器的认识，不只是掌握 babel 本身。</p></div> <!----> <!----></div>  <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="./fe-engineering-docs-babel-docs-note-22-Babel%20Macros.html" class="prev">Babel Macros</a></span> <span class="next"><a href="./fe-engineering-docs-babel-docs-note-24-%E6%89%8B%E5%86%99%20Babel%EF%BC%9A%20parser%20%E7%AF%87.html" class>手写 Babel： parser 篇</a>
      →
    </span></p></div>  </main> <div class="el-dialog__wrapper" style="display:none"></div> <div class="el-dialog__wrapper" style="display:none"></div> <div class="el-dialog__wrapper" style="display:none"></div> <div class="el-dialog__wrapper" style="display:none"></div></div><div class="global-ui"><!----></div></div>
    
  

</body></html>